# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
> Документная БД. Чек документ - как раз подойдет для хранения
- Склады и автомобильные дороги для логистической компании
> Графовые БД. Склады могут быть вершинами. Дороги ребрами.
- Генеалогические деревья
> Иерархическая БД прям напрашивается, но родитель в ней указывается один. Так что реляционная бд, где можно будет указать 
> пару родителей. И быстро обрабатывать данные
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
> Для хранения кеша лучше подойдет NoSQL бд, т.к. работают быстро.
- Отношения клиент-покупка для интернет-магазина
> Реляционные БД. Возможность коммитить транзакции при подтверждении покупки, либо откатывать транзакции при ошибке оплаты

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
> По CAP теореме - AC. Данные во всех узлах кластера согласованы и доступны, но не устойчивы к разделению.  
> По PACELC теореме PA/EL  
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
> По CAP теореме - AP. Не гарантирует целостность данных, обеспечивая их доступность и устойчивость к 
> разделению. Такая система отлично справляется с отказами нескольких узлов, но, 
> когда они снова начинают работать, возможна выдача пользователям старых данных.
> По PACELC теореме PA/EL
- Система может не прислать корректный ответ или сбросить соединение
> По CAP теореме - CP, т.к. условие доступности требует, чтобы запрос всегда завершался корректным ответом.
> По PACELC теореме PC/EC, будут жертвовать доступностью, то есть остаётся согласованность. 

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
> Принципы BASE и ACID сочетаться не могут.  
> Требования надежности к транзакционной системе Atomicity - Атомарность. Атомарность гарантирует, что никакая транзакция не будет зафиксирована в системе частично  
> BASE-архитектура Basically Available, Soft-state, Eventually consistent базовая доступность, неустойчивое состояние, согласованность в конечном счёте Противопоставляется ACID.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?
> Redis - высокопроизводительная БД с открытым исходным кодом, которая хранит данные в памяти, доступ к
> которым осуществляется по ключу доступа. Из минусов можно потерять данные при сбое сервера или перезапуске сервиса,
> размер БД ограничен доступной памятью, нет сегментации на пользователей или группы пользователей, отсутствует контроль доступа
---
